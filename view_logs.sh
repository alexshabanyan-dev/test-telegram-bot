#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤ –±–æ—Ç–∞
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: bash view_logs.sh [–æ–ø—Ü–∏–∏]

echo "üìã –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ Telegram Channel Monitor"
echo ""

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç—ã
if [ "$1" == "matches" ] || [ "$1" == "m" ]; then
    echo "üîç –ü–æ–∫–∞–∑—ã–≤–∞—é —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (—Å–æ–≤–ø–∞–¥–µ–Ω–∏—è):"
    echo ""
    sudo journalctl -u telegram-monitor.service -f | grep -A 10 "–ù–ê–ô–î–ï–ù–û –°–û–í–ü–ê–î–ï–ù–ò–ï"
elif [ "$1" == "all" ] || [ "$1" == "a" ]; then
    echo "üìú –ü–æ–∫–∞–∑—ã–≤–∞—é –≤—Å–µ –ª–æ–≥–∏ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫):"
    echo ""
    sudo journalctl -u telegram-monitor.service -n 100
elif [ "$1" == "follow" ] || [ "$1" == "f" ]; then
    echo "üëÄ –°–ª–µ–∂—É –∑–∞ –ª–æ–≥–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:"
    echo ""
    sudo journalctl -u telegram-monitor.service -f
elif [ "$1" == "errors" ] || [ "$1" == "e" ]; then
    echo "‚ùå –ü–æ–∫–∞–∑—ã–≤–∞—é —Ç–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏:"
    echo ""
    sudo journalctl -u telegram-monitor.service -n 50 | grep -i "–æ—à–∏–±–∫–∞\|error\|failed\|exception"
else
    echo "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: bash view_logs.sh [–æ–ø—Ü–∏—è]"
    echo ""
    echo "–û–ø—Ü–∏–∏:"
    echo "  matches, m  - –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (—Å–æ–≤–ø–∞–¥–µ–Ω–∏—è)"
    echo "  all, a      - –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –ª–æ–≥–∏ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫)"
    echo "  follow, f   - –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)"
    echo "  errors, e   - –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏"
    echo ""
    echo "–ü—Ä–∏–º–µ—Ä—ã:"
    echo "  bash view_logs.sh          # –°–ª–µ–¥–∏—Ç—å –∑–∞ –≤—Å–µ–º–∏ –ª–æ–≥–∞–º–∏"
    echo "  bash view_logs.sh matches # –¢–æ–ª—å–∫–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è"
    echo "  bash view_logs.sh errors  # –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏"
    echo ""
    echo "üëÄ –°–ª–µ–∂—É –∑–∞ –ª–æ–≥–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):"
    echo ""
    sudo journalctl -u telegram-monitor.service -f
fi

